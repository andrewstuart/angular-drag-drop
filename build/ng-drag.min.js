angular.module("ngDrag",[]),angular.module("ngDrag").directive("ngDrag",["DragData",function(a){return{restrict:"A",link:function(b,c,d){c.attr("draggable","true"),d.dragEnd&&c.on("dragend",function(a){$timeout(function(){b.$eval(d.dragEnd,{$event:a})})}),c.on("dragstart",function(c){c.originalEvent.dataTransfer.getData("ngdrag/type")||(c.originalEvent.dataTransfer.setData("ngdrag/type",d.ngDrag||"ngdrag/id"),c.originalEvent.dataTransfer.setData(d.ngDrag||"ngdrag/id",b.$id)),a.add(b),d.dragStart&&$timeout(function(){b.$eval(d.dragStart,{$event:c})})})}}}]),angular.module("ngDrag").directive("ngDrop",["DragData",function(a){return{restrict:"A",link:function(b,c,d){c.on("dragover",function(a){a.preventDefault(),d.dragOver&&b.$apply(function(){b.$eval(d.dragOver,{$event:a})})}),c.on("dragenter",function(a){a.preventDefault();var b=a.originalEvent.dataTransfer.getData("ngdrag/type");b===d.allowDrop?event.dataTransfer.dropEffect="move":event.dataTransfer.dropEffect="none"}),c.on("drop",function(c){c.preventDefault();var e=c.originalEvent.dataTransfer.getData(d.allowDrop||"ngdrag/id");if(e){var f=a.get(e);b.$apply(function(){b.$eval(d.ngDrop,{$from:f,$event:c})})}})}}}]),angular.module("ngDrag").service("DragData",function(){var a={};this.add=function(b){b.$id&&(a[b.$id]=b,b.$on("$destroy",function(){delete a[b.$id]}))},this.get=function(b){return a[b]?a[b]:void 0}});